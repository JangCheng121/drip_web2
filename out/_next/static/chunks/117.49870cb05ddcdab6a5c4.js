(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[117],{E39E:function(t,e,a){"use strict";var n=a("TqRt"),i=a("284h");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(a("q1tI")),s=(0,n(a("8/g6")).default)(o.createElement("path",{d:"M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"}),"ArrowForward");e.default=s},HDE3:function(t,e,a){"use strict";a.r(e);var n=a("1OyB"),i=a("vuIU"),o=a("md7G"),s=a("foSv"),r=a("JX7q"),c=a("Ji7U"),l=a("q1tI"),h=a.n(l),u=(a("rkyY"),a("LvDl")),d=a.n(u),g=a("5ryX"),m=a("cjxU"),p=a("4uOB"),f=a("tNXx"),x=a("DZua"),y=a("r9w1"),v=a("iuhU"),b=a("7SZd"),C=a("E39E"),S=a.n(C),E=a("Z3vd"),_=a("ofer"),O=a("5Gel"),N=a("30+C"),P=a("oa/T"),T=h.a.createElement;function w(t,e,a){return e=Object(s.a)(e),Object(o.a)(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,a||[],Object(s.a)(t).constructor):e.apply(t,a))}var k=null,I=function(t){function e(t){var a;return Object(n.a)(this,e),(a=w(this,e,[t])).toggle=a.toggle.bind(Object(r.a)(a)),a.state={popoverOpen:!1},a}return Object(c.a)(e,t),Object(i.a)(e,[{key:"toggle",value:function(t){t&&(this.anchorEl=t.currentTarget),this.setState({popoverOpen:!this.state.popoverOpen})}},{key:"exchangeMoney",value:function(t){var e=this.props.exchangeMoney;this.toggle(),e(t)}},{key:"render",value:function(){var t=this,e=this.props,a=e.dataItem,n=e.btnStr,i=e.containerStr,o=e.mi,s=e.state,r=e.id,c=e.cancelBtnStr,l=e.moneyStr,h=e.btnState;return T("span",null,T(N.a,{className:"col-auto p-0 border-0",style:{borderRadius:15,boxShadow:"3px 5px 6px 0px #b8b8b8"}},T(P.a,{className:"p-0 money_bg_img"},T("img",{alt:"",className:"money_title_img",src:a.img}),T("h4",{className:"mb-0 col-auto money_exchange_title_text"},a.cash," ",l),T(E.a,{id:"Popover-"+r,className:"money_exchange_title_button btn-brand align-items-center d-flex justify-content-center",onClick:function(e){t.toggle.bind(t,e)},disabled:a.money>o.coin||h},T("img",{alt:"",src:"../../static/img/common/coin.png",style:{width:30,height:30}}),T("span",{className:"mb-0",style:{fontSize:18}},a.money)),a.money>o.coin?null:T(O.a,{open:this.state.popoverOpen,anchorEl:this.anchorEl,onClose:this.toggle,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},T(_.a,{style:{padding:5}},T("h3",{className:"pl-3 pt-2 mb-0"},a.money+s),T("h3",{className:"p-3"},i),T("div",{style:{flexDirection:"row",justifyContent:"center"}},T(E.a,{variant:"outlined",color:"primary",style:{margin:10},onClick:function(){t.exchangeMoney(a.money)},disabled:h},n),T(E.a,{variant:"outlined",style:{margin:10},color:"danger",onClick:function(){t.toggle()}},c)))))))}}]),e}(l.Component),j=function(t){function e(t){var a;Object(n.a)(this,e),a=w(this,e,[t]),k=Object(r.a)(a),a.state={modalState:!1,exchangeSetting:g.a.exchangeSetting,coinToPoint:!1,btnDisable:!1,fromExchangeCoin:0,toExchangePoint:0,requireExchangeState:!1,exchangeCoin2Value:0,exchange2CashValue:0};var i=a.props,o=i.system,s=(i.getHistory,i.setting),c=i.getSetting,l=o[p.c];return(!l.data||!l.data.length)&&l.status!==x.U&&(l.status,x.T),s&&s.data&&s.data.exchange_rate_point&&s.data.exchange_rate_coin||c(),a.state.exchangeSetting.length||g.a.getChargeSet().then((function(t){var e=d.a.sortBy(d.a.filter(t,{type:1}),["cash"]),a=d.a.sortBy(d.a.filter(t,{type:2}),["cash"]);g.a.chargeSetting=e,g.a.exchangeSetting=a,k.setState({exchangeSetting:a})}),(function(t){console.log("get ChargeSet error")})),a}return Object(c.a)(e,t),Object(i.a)(e,[{key:"sendChangeState",value:function(t,e,a){void 0===t||e<=0||(this.setState({requireExchangeState:!0}),g.a.charge("coin",t,e,a).then((function(t){k.setState({requireExchangeState:!1}),k.openModal()})).catch((function(t){})))}},{key:"openModal",value:function(){this.setState({modalState:!this.state.modalState})}},{key:"funcClickCoinToPoint",value:function(){this.setState({coinToPoint:!this.state.coinToPoint})}},{key:"handleInputChange",value:function(t){var e=this.props.setting.data,a=this.props.mi,n=t.value,i=!!isNaN(n);if(e.exchange_rate_point&&!i)if("coin2point"===t.name){n>a.coin&&(n=a.coin);var o=parseInt(n),s=o*e.exchange_rate_point;this.setState({fromExchangeCoin:o||0,toExchangePoint:s||0,btnDisable:!!s})}else if("coin2cash"===t.name){var r=parseInt(n);r>a.coin&&(r=a.coin);var c=d.a.round(r/e.exchange_rate_point/e.exchange_rate_coin,2);this.setState({exchangeCoin2Value:r||0,exchange2CashValue:c||0})}}},{key:"funcLoadMoreHistory",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:x.M,n=this.props,i=n.getHistory,o=n.system,s=p.c;o[s]&&o[s].status===x.U||i(s,a,t,e)}},{key:"funcExchangeCoinToPoint",value:function(){var t=this.props.mi;this.state.toExchangePoint&&(this.state.fromExchangeCoin>t.coin||(this.setState({requireExchangeState:!0}),g.a.requestCoinToPoint(this.state.fromExchangeCoin,this.state.toExchangePoint).then((function(t){k.setState({fromExchangeCoin:0,toExchangePoint:0,coinToPoint:!1,requireExchangeState:!1})}),(function(t){}))))}},{key:"funcExchangeCoin2Cash",value:function(){var t=this.props.setting;!this.state.exchangeCoin2Value||!this.state.exchange2CashValue||this.state.exchangeCoin2Value<t.data.cash_out_from||(this.setState({requireExchangeState:!0}),g.a.charge("coin",-1,this.state.exchangeCoin2Value,this.state.exchange2CashValue).then((function(t){g.a.showNotification("success","Exchange success!!"),k.setState({exchangeCoin2Value:0,exchange2CashValue:0,requireExchangeState:!1}),k.openModal()}),(function(t){})))}},{key:"renderCurrentCtime",value:function(t,e){return T("span",null,t?m.h(t,"L"):"\ub85c\ub4dc\uc911")}},{key:"renderTableProState",value:function(t,e){return T("span",null,{done:"\uacb0\uc0b0\ub428",pending:"\ub300\uae30\uc911"}[t])}},{key:"renderExchange",value:function(t){var e=this,a=this.props.mi;return T("div",{style:{flexDirection:"row",justifyContent:"space-around",marginTop:5,display:"flex"}},t.map((function(t,n){return T("div",{key:n,style:{minWidth:200,flexDirection:"column",display:"flex"},className:"col-md-2 col-sm-3"},T(I,{btnState:e.state.requireExchangeState,state:"\uae08\ud654",dataItem:t,btnStr:"\ud658\uc804",mi:a,exchangeMoney:function(){e.sendChangeState(t.id,t.money,t.cash)},containerStr:"ISTOEXCHANGE",key:n,item:{placement:"right",text:"Right"},id:n,cancelBtnStr:"\ucde8\uc18c",moneyStr:"\u20a9"}))})))}},{key:"render",value:function(){for(var t=this,e=[],a=this.props,n=a.mi,i=a.system,o=a.setting,s=a.t,r=[{title:s("REQUESTDATE"),field:"ctime",render:function(e){return t.renderCurrentCtime(e.ctime)}},{title:s("RESPONSEDATE"),field:"utime",render:function(e){return t.renderCurrentCtime(e.utime)}},{title:s("CASH"),field:"cash"},{title:s("POINT"),field:"money"}],c=p.c,l=0;l<i[c].totalLength&&i[c].totalLength;l++){var h=i[c].data[l];h?e.push(h):e.push([])}return T("div",{style:{padding:15}},T("div",{className:"mt-3 ml-0 mr-0 mb-5",style:{width:"100%",flexDirection:"row",display:"flex"}},T("div",{style:{flexDirection:"column",display:"flex",width:"100%"}},T("div",{style:{margin:2,flexDirection:"row",display:"flex",alignItems:"center",justifyContent:"center"}},T("div",{className:"col-auto p-2 point_coin_view"},T("img",{alt:"",src:"../../static/img/common/coin.png",style:{width:30,height:30}}),T("h4",{className:"mb-0 ml-2",style:{color:"white"}},n.coin?n.coin:0))))),T("span",null,s("EXCHANGE_ENABLE_ALERT",{coin:o.data&&o.data.cash_out_from?o.data.cash_out_from:1e3})),T("div",{style:{flexDirection:"row",display:"flex",alignItems:"center"}},T(y.a,{id:"filled-adornment-extra-dense",className:Object(v.default)({margin:10,flexBasis:200}),variant:"filled",margin:"dense",hiddenLabel:!0,name:"coin2cash",value:this.state.exchangeCoin2Value,onChange:function(e){t.handleInputChange(e.target)},InputProps:{inputProps:{"aria-label":"amount in Euro"},startAdornment:T(b.a,{position:"start"},"1",T("img",{alt:"",src:"../../static/img/common/coin.png",style:{width:20,height:20}}))}}),T(S.a,{style:{fontSize:30}}),T(y.a,{id:"filled-adornment-extra-dense",className:Object(v.default)({margin:10,flexBasis:200}),variant:"filled",margin:"dense",hiddenLabel:!0,value:this.state.exchange2CashValue,disabled:!0,InputProps:{inputProps:{"aria-label":"amount in Euro"},startAdornment:T(b.a,{position:"start"},d.a.round(1/(o.data&&o.data.exchange_rate_point?o.data.exchange_rate_point:1)/(o.data&&o.data.exchange_rate_coin?o.data.exchange_rate_coin:1),2),"\u20a9")}}),T(E.a,{variant:"outlined",color:"primary",style:{margin:1},disabled:this.state.exchangeCoin2Value<(o.data&&o.data.cash_out_from?o.data.cash_out_from:1e3)||this.state.requireExchangeState,onClick:function(){t.funcExchangeCoin2Cash()},className:"btn red point-btn m-3 "},s("POINTOUT"))),T("div",{style:{flexDirection:"row",display:"flex",alignItems:"center"}},T(y.a,{id:"filled-adornment-extra-dense",className:Object(v.default)({margin:10,flexBasis:200}),variant:"filled",margin:"dense",hiddenLabel:!0,name:"coin2point",value:this.state.fromExchangeCoin,onChange:function(e){t.handleInputChange(e.target)},InputProps:{inputProps:{"aria-label":"amount in Euro"},startAdornment:T(b.a,{position:"start"},"1",T("img",{alt:"",src:"../../static/img/common/coin.png",style:{width:20,height:20}}))}}),T(S.a,{style:{fontSize:30}}),T(y.a,{id:"filled-adornment-extra-dense",className:Object(v.default)({margin:10,flexBasis:200}),variant:"filled",margin:"dense",hiddenLabel:!0,value:this.state.toExchangePoint,disabled:!0,InputProps:{inputProps:{"aria-label":"amount in Euro"},startAdornment:T(b.a,{position:"start"},o.data&&o.data.exchange_rate_point?o.data.exchange_rate_point:1,T("img",{alt:"",src:"../../static/img/common/point.png",style:{width:20,height:20}}))}}),T(E.a,{variant:"outlined",color:"primary",style:{margin:1},disabled:!this.state.btnDisable,onClick:function(){t.funcExchangeCoinToPoint()},className:"btn red point-btn m-3 "},s("POINTOUT"))),T(f.default,{mi:this.props.mi,context_t:this.props.t,getHistory:this.props.getHistory,type:c,noDataText:i[c].status===x.T?s("NO_DATA"):s("LOADING"),columns:r}))}}]),e}(l.Component);e.default=j}}]);