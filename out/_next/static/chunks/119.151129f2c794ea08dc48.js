(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[119],{Jmtr:function(t,e,r){"use strict";r.r(e);var n=r("wx14"),a=r("HaE+"),o=r("1OyB"),i=r("vuIU"),u=r("md7G"),c=r("foSv"),l=r("JX7q"),s=r("Ji7U"),f=r("rePB"),h=r("q1tI"),d=r.n(h),v=r("/MKj"),p=(r("rkyY"),r("4uOB")),y=r("DZua"),g=r("tNXx"),m=r("cjxU"),w=r("UhlP"),b=r("luQY"),S=r("5ryX"),E=r("xMF9"),O=r.n(E),A=r("MBUC"),T=d.a.createElement;function _(){_=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o=e&&e.prototype instanceof y?e:y,i=Object.create(o.prototype),u=new I(n||[]);return a(i,"_invoke",{value:T(t,r,u)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var h="suspendedStart",d="executing",v="completed",p={};function y(){}function g(){}function m(){}var w={};l(w,i,(function(){return this}));var b=Object.getPrototypeOf,S=b&&b(b(j([])));S&&S!==r&&n.call(S,i)&&(w=S);var E=m.prototype=y.prototype=Object.create(w);function O(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function r(a,o,i,u){var c=f(t[a],t,o);if("throw"!==c.type){var l=c.arg,s=l.value;return s&&"object"==typeof s&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,i,u)}),(function(t){r("throw",t,i,u)})):e.resolve(s).then((function(t){l.value=t,i(l)}),(function(t){return r("throw",t,i,u)}))}u(c.arg)}var o;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return o=o?o.then(a,a):a()}})}function T(e,r,n){var a=h;return function(o,i){if(a===d)throw new Error("Generator is already running");if(a===v){if("throw"===o)throw i;return{value:t,done:!0}}for(n.method=o,n.arg=i;;){var u=n.delegate;if(u){var c=L(u,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===h)throw a=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=d;var l=f(e,r,n);if("normal"===l.type){if(a=n.done?v:"suspendedYield",l.arg===p)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(a=v,n.method="throw",n.arg=l.arg)}}}function L(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var o=f(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,p;var i=o.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,p):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function j(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(typeof e+" is not iterable")}return g.prototype=m,a(E,"constructor",{value:m,configurable:!0}),a(m,"constructor",{value:g,configurable:!0}),g.displayName=l(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,l(t,c,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},O(A.prototype),l(A.prototype,u,(function(){return this})),e.AsyncIterator=A,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new A(s(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},O(E),l(E,c,"Generator"),l(E,i,(function(){return this})),l(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=j,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return u.type="throw",u.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],u=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;k(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:j(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),p}},e}function L(t,e,r){return e=Object(c.a)(e),Object(u.a)(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Object(c.a)(t).constructor):e.apply(t,r))}var x=null,k=function(t){function e(t){var r;return Object(o.a)(this,e),r=L(this,e,[t]),Object(f.a)(Object(l.a)(r),"deleteItems",function(){var t=Object(a.a)(_().mark((function t(e){return _().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(A.d)("/api/advert","delete",{params:{filter:{ids:e}}});case 2:t.sent&&r.tableRef.current&&r.tableRef.current.onQueryChange();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),x=Object(l.a)(r),r.state={renderAdvertData:[],renderDataTotalLength:0,loadMoreState:"success",hasNoMoreData:!1,alertModalState:!1,changeStateAdvertId:-1,advertState:!1,selectedItem:null},r.tableRef=d.a.createRef(),r}return Object(s.a)(e,t),Object(i.a)(e,[{key:"funcChangeAdvertState",value:function(t,e){var r=e.id,n=t.target.checked;r&&(this.setState({selectedItem:e}),this.funcToggleAlertModal(r,n))}},{key:"funcToggleAlertModal",value:function(t,e){this.setState({alertModalState:!this.state.alertModalState,changeStateAdvertId:this.state.alertModalState?-1:t,advertState:e})}},{key:"funcAdvertStateSetFalse",value:function(){var t=this,e=this.state.changeStateAdvertId,r={state:this.state.advertState},n=this.state.selectedItem;-1!==e&&n&&(n.guarantee<n.point?S.a.showNotification("warning","\ubcf8 \uad11\uace0\ub294 \ubcf4\uc99d\uae08 \ubd80\uc871\uc73c\ub85c \ucd9c\uc2dc\ud560\uc218 \uc5c6\uc2b5\ub2c8\ub2e4."):S.a.updateMyAdvert(this.state.changeStateAdvertId,r).then((function(e){x.setState({alertModalState:!1,changeStateAdvertId:-1}),t.tableRef.current&&t.tableRef.current.onQueryChange()}),(function(t){x.setState({alertModalState:!1,changeStateAdvertId:-1})})))}},{key:"renderMedia",value:function(t){var e=this.props.ai.token;return!t&&!t[0]&&t[0].src&&t[0].thumb?T("div",null,T("img",{alt:"",src:"../../static/img/common/drip_default.png",style:{width:25}})):T("div",{className:"div_row"},t.map((function(t,r){var n=t.thumb?t.thumb:t.src;return T("div",{key:r,style:{width:25,height:25},className:"ml-1"},T("img",{alt:"",src:n+"?token="+e,style:{width:"100%"}}))})))}},{key:"renderAdvertState",value:function(t,e){var r=this;return T("div",null,T(w.a,{onChange:function(t){r.funcChangeAdvertState(t,e)},color:"primary",outline:"alt",label:!0,checked:t}))}},{key:"renderTime",value:function(t,e){return T("span",null,t?m.h(t,"YYYY-MM-DD"):"Loading...")}},{key:"renderAdvertUrl",value:function(t){return T("a",{href:t},t)}},{key:"funcDeleteItems",value:function(){var t=Object(a.a)(_().mark((function t(e,r){var n,a,o;return _().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(o in n=x.props.setAppModalState,a=[],r)r[o].id&&a.push(r[o].id);n("page","\uc120\ud0dd\ub41c \ud56d\ubaa9\ub4e4\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?","DELETE",(function(){return x.deleteItems(a)}));case 4:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()},{key:"renderPayPoint",value:function(t){var e=t.point*t.views;return T("div",null,e)}},{key:"renderDetailPanel",value:function(t){return T("div",{style:{backgroundColor:"green",height:100}},"detail panel.....")}},{key:"renderTotalGuarantee",value:function(t){var e=t.guarantee+t.point*t.views;return T("div",null,e)}},{key:"render",value:function(){var t=this,e=this.props.t,r=[{title:"",field:"media",render:function(e){return t.renderMedia(e.media)}},{title:e("ADVERT_LINK"),field:"url",render:function(e){return t.renderAdvertUrl(e.url)}},{title:e("INSET_DATE"),field:"ctime",render:function(e){return t.renderTime(e.ctime)}},{title:e("FINISH_DATE"),field:"etime",render:function(e){return t.renderTime(e.etime)}},{title:e("ADVERT_GUARANTEE"),field:"guarantee",render:function(e){return t.renderTotalGuarantee(e)}},{title:e("PAY_POINT"),field:"point",maxWidth:100},{title:e("VIEWS_CNT"),field:"views",maxWidth:100},{title:e("CONSUMPTION_POINT"),field:"",maxWidth:100,render:function(e){return t.renderPayPoint(e)}},{title:e("REMAIN_POINT"),field:"guarantee"},{title:e("INCOMSTATE"),field:"state",render:function(e){return t.renderAdvertState(e.state,e)},maxWidth:100}];return T("div",null,T(g.default,{tableRef:this.tableRef,mi:this.props.mi,type:"advert",context_t:this.props.t,noDataText:e("NO_DATA"),columns:r,table_selection:!0,table_action:[{tooltip:"Remove All Selected Items",icon:function(){return T(O.a,null)},onClick:function(e,r){t.funcDeleteItems(e,r)}}]}),T(b.a,Object(n.a)({},this.props,{modalStatus:this.state.alertModalState,goStatus:"page",toggleFunc:this.funcToggleAlertModal.bind(this),alertStr:this.state.advertState?e("ADVERT_STATE_TRUE_ALERT"):e("ADVERT_STATE_FALSE_ALERT"),btnOkStr:e("DONE"),funcBtnOkCallback:this.funcAdvertStateSetFalse.bind(this)})))}}]),e}(h.Component);e.default=Object(v.connect)((function(t){return{system:t.system,users:t.users,mi:t.system.mi,ai:t.system.ai,setting:t.system.setting,lang:t.i18nState.lang}}),(function(t){return{getHistory:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y.M,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;return t(p.k(e,r,n,a))},getSetting:function(){return t(p.l())}}}))(k)},xMF9:function(t,e,r){"use strict";var n=r("TqRt"),a=r("284h");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a(r("q1tI")),i=(0,n(r("8/g6")).default)(o.createElement("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12l1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"}),"DeleteForever");e.default=i}}]);