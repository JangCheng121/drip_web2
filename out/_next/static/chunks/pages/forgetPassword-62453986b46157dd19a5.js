_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[178],{Au56:function(t,e,a){"use strict";a.r(e),a.d(e,"TimeCount",(function(){return C}));var n=a("q1tI"),i=a.n(n),o=a("Z3vd"),r=a("5CWz"),u=a("r9w1"),s=a("tRbT"),c=a("ofer"),l=a("R/WZ"),d=a("Ji2X"),h=(a("YNhk"),a("nsQA")),p=a.n(h),m=(a("kC0v"),a("MBUC")),f=a("u05Q"),g=a("/MKj"),b=a("4uOB"),y=a("SZc0"),v=a("Q69k"),w=a("uRQd"),S=i.a.createElement,_=Object(l.a)((function(t){return{"@global":{body:{backgroundColor:t.palette.common.white}},paper:{marginTop:t.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:t.spacing(1)},form:{width:"100%",marginTop:t.spacing(3)},submit:{margin:t.spacing(3,0,2)}}})),j=null,C=function(t){var e=Object(n.useState)(60),a=e[0],i=e[1];return Object(n.useEffect)((function(){return j&&clearInterval(j),j=setInterval((function(){var e=a-1;console.log("here is timer.reqAuthKeyState:",e),e<=0?(clearInterval(j),j=null,t.setReqAuthKeyState()):i(e)}),1e3),function(){return clearInterval(j)}}),[a]),S("span",null,a,"s")};e.default=Object(g.connect)((function(t){return{mi:t.system.mi}}),(function(t){return{setMI:function(e){return t(b.p(e))},setUser:function(e,a){return t(y.g(e,a))}}}))((function(t){var e=_(),a=Object(n.useState)(""),i=(a[0],a[1]),l=Object(n.useState)(1),h=l[0],g=l[1],b=Object(n.useState)(""),y=b[0],O=b[1],K=Object(n.useState)(""),k=K[0],E=K[1],N=Object(n.useState)(""),I=N[0],x=N[1],A=Object(n.useState)(""),T=A[0],q=A[1],W=Object(n.useState)(!1),R=W[0],M=W[1],Q=Object(n.useState)(!0),J=Q[0],L=Q[1],P=Object(n.useState)(""),U=P[0],X=P[1],Y=Object(n.useState)(""),Z=Y[0],B=Y[1];function F(t){var e=t.target.value;"name"===t.target.name?i(e):"authKey"===t.target.name?(E(e),X("")):"password"===t.target.name&&q(e)}function G(t,e){"phoneError"===t?B(e):"authKeyError"===t?X(e):"authKeyInvalid"===t?L(e):"reqAuthKeyState"===t&&M(e)}return S(d.a,{component:"main",maxWidth:"xs"},S(r.a,null),S("div",{style:{marginLeft:"auto",width:"fit-content",marginTop:50}},S(w.a,{props:t})),S("div",{className:e.paper},S("div",{className:e.avatar},S("img",{src:"../static/image/logo.png",style:{width:"100%",height:"100%"}})),S(c.a,{component:"h1",variant:"h5"},"\ube44\ubc88\ubcc0\uacbd ",I),S("div",{className:e.form},S(s.a,{container:!0,justify:"flex-start",spacing:2},S(s.a,{item:!0,xs:12,sm:8},S(p.a,{defaultCountry:"cn",placeholder:"\ud3f0\ubc88\ud638",disabled:R,value:y,enableSearchField:!0,autoFormat:!1,conatinerStyle:{width:"100%"},inputStyle:{width:"100%",height:56},onChange:function(t,e){O(t.replace(/[^0-9]+/g,"").slice(e.dialCode.length)),g(e.dialCode),B("")}})),S(s.a,{item:!0,xs:12,sm:4},S(o.a,{type:"submit",fullWidth:!0,variant:"outlined",disabled:R,style:{height:56},onClick:function(){var t="".concat(h).concat(y);M(!0),Object(m.d)("/account/get_auth","post",{method:"phone",uuid:t,pNum:y,areaCode:h}).then((function(t){"ok"===t.result&&(f.a.ai.uuid=h+y,t.code&&x(t.code))})).catch((function(t){console.log(t)}))}},R?S(C,{setReqAuthKeyState:function(){return M(!1)}}):"\uc778\uc99d\ud0a4\uc694\uccad")),S("span",{style:{paddingTop:3,color:"red"}},Z),S(s.a,{item:!0,xs:12,sm:8},S(u.a,{variant:"outlined",required:!0,fullWidth:!0,id:"authKey",label:"\uc778\uc99d\ud0a4",name:"authKey",autoComplete:"authKey",disabled:!R,onChange:F})),S(s.a,{item:!0,xs:12,sm:4},S(o.a,{type:"submit",fullWidth:!0,variant:"outlined",style:{height:"100%"},disabled:!R,onClick:function(){var t={uuid:f.a.ai.uuid,code:k,method:"phone",pNum:y,areaCode:h,action:""},e="";Object(m.d)("/account/get_auth","post",t).then((function(t){"ok"===t.result?(clearInterval(j),j=null,G("reqAuthKeyState",!1),t.user_id&&t.user_id!==f.a.ai.user_id&&(f.a.ai.user_id=t.user_id,f.a.ai.authkey=t.authkey,e="init"),f.a.procAuth(e).then((function(t){G("authKeyInvalid",!1)}),(function(t){console.log("proAuth Error",t)}))):G("authKeyError","\uc778\uc99d\ud0a4\uac00 \uc815\ud655\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.")}),(function(t){console.log("auth Error",t)}))}},J?"\uc778\uc99d\ud0a4\ud655\uc778":"\uc778\uc99d\ub428")),S("span",{style:{paddingTop:3,color:"red"}},U),S(s.a,{item:!0,xs:12},S(u.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"\ube44\ubc88",type:"password",id:"password",autoComplete:"current-password",onChange:F}))),S(o.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,disabled:J,style:{height:"100%"},onClick:function(){var e=t.mi,a=t.setUser,n=t.setMI,i={password:T};e.password=T,Object(m.d)("/api/auth/register","post",{user_id:e.id,info:i}).then((function(t){n(e),a(e.id,e),v.Router.pushRoute("/login")}),(function(t){console.log(t)}))}},"\ube44\ubc88\ubcc0\uacbd"))))}))},YL6G:function(t,e,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/forgetPassword",function(){return a("Au56")}])}},[["YL6G",6,5,9,11,14,0,2,7,10,12,13,8,16,17,20,23,24,65,64,1]]]);